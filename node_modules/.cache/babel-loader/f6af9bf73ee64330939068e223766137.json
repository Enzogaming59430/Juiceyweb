{"ast":null,"code":"/*\n * @author https://twitter.com/blurspline / https://github.com/zz85\n * See post @ http://www.lab4games.net/zz85/blog/2014/11/15/resizing-moving-snapping-windows-with-js-css/\n */\n\"use strict\"; // Minimum resizable area\n\nvar minWidth = 60;\nvar minHeight = 40; // Thresholds\n\nvar FULLSCREEN_MARGINS = -10;\nvar MARGINS = 4; // End of what's configurable.\n\nvar clicked = null;\nvar onRightEdge, onBottomEdge, onLeftEdge, onTopEdge;\nvar rightScreenEdge, bottomScreenEdge;\nvar preSnapped;\nvar b, x, y;\nvar redraw = false;\nvar pane = document.getElementById('pane');\nvar ghostpane = document.getElementById('ghostpane');\n\nfunction setBounds(element, x, y, w, h) {\n  element.style.left = x + 'px';\n  element.style.top = y + 'px';\n  element.style.width = w + 'px';\n  element.style.height = h + 'px';\n}\n\nfunction hintHide() {\n  setBounds(ghostpane, b.left, b.top, b.width, b.height);\n  ghostpane.style.opacity = 0; // var b = ghostpane.getBoundingClientRect();\n  // ghostpane.style.top = b.top + b.height / 2;\n  // ghostpane.style.left = b.left + b.width / 2;\n  // ghostpane.style.width = 0;\n  // ghostpane.style.height = 0;\n} // Mouse events\n\n\npane.addEventListener('mousedown', onMouseDown);\ndocument.addEventListener('mousemove', onMove);\ndocument.addEventListener('mouseup', onUp); // Touch events\t\n\npane.addEventListener('touchstart', onTouchDown);\ndocument.addEventListener('touchmove', onTouchMove);\ndocument.addEventListener('touchend', onTouchEnd);\n\nfunction onTouchDown(e) {\n  onDown(e.touches[0]);\n  e.preventDefault();\n}\n\nfunction onTouchMove(e) {\n  onMove(e.touches[0]);\n}\n\nfunction onTouchEnd(e) {\n  if (e.touches.length == 0) onUp(e.changedTouches[0]);\n}\n\nfunction onMouseDown(e) {\n  onDown(e);\n  e.preventDefault();\n}\n\nfunction onDown(e) {\n  calc(e);\n  var isResizing = onRightEdge || onBottomEdge || onTopEdge || onLeftEdge;\n  clicked = {\n    x: x,\n    y: y,\n    cx: e.clientX,\n    cy: e.clientY,\n    w: b.width,\n    h: b.height,\n    isResizing: isResizing,\n    isMoving: !isResizing && canMove(),\n    onTopEdge: onTopEdge,\n    onLeftEdge: onLeftEdge,\n    onRightEdge: onRightEdge,\n    onBottomEdge: onBottomEdge\n  };\n}\n\nfunction canMove() {\n  return x > 0 && x < b.width && y > 0 && y < b.height && y < 30;\n}\n\nfunction calc(e) {\n  b = pane.getBoundingClientRect();\n  x = e.clientX - b.left;\n  y = e.clientY - b.top;\n  onTopEdge = y < MARGINS;\n  onLeftEdge = x < MARGINS;\n  onRightEdge = x >= b.width - MARGINS;\n  onBottomEdge = y >= b.height - MARGINS;\n  rightScreenEdge = window.innerWidth - MARGINS;\n  bottomScreenEdge = window.innerHeight - MARGINS;\n}\n\nvar e;\n\nfunction onMove(ee) {\n  calc(ee);\n  e = ee;\n  redraw = true;\n}\n\nfunction animate() {\n  requestAnimationFrame(animate);\n  if (!redraw) return;\n  redraw = false;\n\n  if (clicked && clicked.isResizing) {\n    if (clicked.onRightEdge) pane.style.width = Math.max(x, minWidth) + 'px';\n    if (clicked.onBottomEdge) pane.style.height = Math.max(y, minHeight) + 'px';\n\n    if (clicked.onLeftEdge) {\n      var currentWidth = Math.max(clicked.cx - e.clientX + clicked.w, minWidth);\n\n      if (currentWidth > minWidth) {\n        pane.style.width = currentWidth + 'px';\n        pane.style.left = e.clientX + 'px';\n      }\n    }\n\n    if (clicked.onTopEdge) {\n      var currentHeight = Math.max(clicked.cy - e.clientY + clicked.h, minHeight);\n\n      if (currentHeight > minHeight) {\n        pane.style.height = currentHeight + 'px';\n        pane.style.top = e.clientY + 'px';\n      }\n    }\n\n    hintHide();\n    return;\n  }\n\n  if (clicked && clicked.isMoving) {\n    if (b.top < FULLSCREEN_MARGINS || b.left < FULLSCREEN_MARGINS || b.right > window.innerWidth - FULLSCREEN_MARGINS || b.bottom > window.innerHeight - FULLSCREEN_MARGINS) {\n      // hintFull();\n      setBounds(ghostpane, 0, 0, window.innerWidth, window.innerHeight);\n      ghostpane.style.opacity = 0.2;\n    } else if (b.top < MARGINS) {\n      // hintTop();\n      setBounds(ghostpane, 0, 0, window.innerWidth, window.innerHeight / 2);\n      ghostpane.style.opacity = 0.2;\n    } else if (b.left < MARGINS) {\n      // hintLeft();\n      setBounds(ghostpane, 0, 0, window.innerWidth / 2, window.innerHeight);\n      ghostpane.style.opacity = 0.2;\n    } else if (b.right > rightScreenEdge) {\n      // hintRight();\n      setBounds(ghostpane, window.innerWidth / 2, 0, window.innerWidth / 2, window.innerHeight);\n      ghostpane.style.opacity = 0.2;\n    } else if (b.bottom > bottomScreenEdge) {\n      // hintBottom();\n      setBounds(ghostpane, 0, window.innerHeight / 2, window.innerWidth, window.innerWidth / 2);\n      ghostpane.style.opacity = 0.2;\n    } else {\n      hintHide();\n    }\n\n    if (preSnapped) {\n      setBounds(pane, e.clientX - preSnapped.width / 2, e.clientY - Math.min(clicked.y, preSnapped.height), preSnapped.width, preSnapped.height);\n      return;\n    } // moving\n\n\n    pane.style.top = e.clientY - clicked.y + 'px';\n    pane.style.left = e.clientX - clicked.x + 'px';\n    return;\n  } // This code executes when mouse moves without clicking\n  // style cursor\n\n\n  if (onRightEdge && onBottomEdge || onLeftEdge && onTopEdge) {\n    pane.style.cursor = 'nwse-resize';\n  } else if (onRightEdge && onTopEdge || onBottomEdge && onLeftEdge) {\n    pane.style.cursor = 'nesw-resize';\n  } else if (onRightEdge || onLeftEdge) {\n    pane.style.cursor = 'ew-resize';\n  } else if (onBottomEdge || onTopEdge) {\n    pane.style.cursor = 'ns-resize';\n  } else if (canMove()) {\n    pane.style.cursor = 'move';\n  } else {\n    pane.style.cursor = 'default';\n  }\n}\n\nanimate();\n\nfunction onUp(e) {\n  calc(e);\n\n  if (clicked && clicked.isMoving) {\n    // Snap\n    var snapped = {\n      width: b.width,\n      height: b.height\n    };\n\n    if (b.top < FULLSCREEN_MARGINS || b.left < FULLSCREEN_MARGINS || b.right > window.innerWidth - FULLSCREEN_MARGINS || b.bottom > window.innerHeight - FULLSCREEN_MARGINS) {\n      // hintFull();\n      setBounds(pane, 0, 0, window.innerWidth, window.innerHeight);\n      preSnapped = snapped;\n    } else if (b.top < MARGINS) {\n      // hintTop();\n      setBounds(pane, 0, 0, window.innerWidth, window.innerHeight / 2);\n      preSnapped = snapped;\n    } else if (b.left < MARGINS) {\n      // hintLeft();\n      setBounds(pane, 0, 0, window.innerWidth / 2, window.innerHeight);\n      preSnapped = snapped;\n    } else if (b.right > rightScreenEdge) {\n      // hintRight();\n      setBounds(pane, window.innerWidth / 2, 0, window.innerWidth / 2, window.innerHeight);\n      preSnapped = snapped;\n    } else if (b.bottom > bottomScreenEdge) {\n      // hintBottom();\n      setBounds(pane, 0, window.innerHeight / 2, window.innerWidth, window.innerWidth / 2);\n      preSnapped = snapped;\n    } else {\n      preSnapped = null;\n    }\n\n    hintHide();\n  }\n\n  clicked = null;\n}","map":{"version":3,"names":["minWidth","minHeight","FULLSCREEN_MARGINS","MARGINS","clicked","onRightEdge","onBottomEdge","onLeftEdge","onTopEdge","rightScreenEdge","bottomScreenEdge","preSnapped","b","x","y","redraw","pane","document","getElementById","ghostpane","setBounds","element","w","h","style","left","top","width","height","hintHide","opacity","addEventListener","onMouseDown","onMove","onUp","onTouchDown","onTouchMove","onTouchEnd","e","onDown","touches","preventDefault","length","changedTouches","calc","isResizing","cx","clientX","cy","clientY","isMoving","canMove","getBoundingClientRect","window","innerWidth","innerHeight","ee","animate","requestAnimationFrame","Math","max","currentWidth","currentHeight","right","bottom","min","cursor","snapped"],"sources":["/home/enzo/enzocmd/src/movingwindow.js"],"sourcesContent":["/*\n * @author https://twitter.com/blurspline / https://github.com/zz85\n * See post @ http://www.lab4games.net/zz85/blog/2014/11/15/resizing-moving-snapping-windows-with-js-css/\n */\n\n\"use strict\";\n\n// Minimum resizable area\nvar minWidth = 60;\nvar minHeight = 40;\n\n// Thresholds\nvar FULLSCREEN_MARGINS = -10;\nvar MARGINS = 4;\n\n// End of what's configurable.\nvar clicked = null;\nvar onRightEdge, onBottomEdge, onLeftEdge, onTopEdge;\n\nvar rightScreenEdge, bottomScreenEdge;\n\nvar preSnapped;\n\nvar b, x, y;\n\nvar redraw = false;\n\nvar pane = document.getElementById('pane');\nvar ghostpane = document.getElementById('ghostpane');\n\nfunction setBounds(element, x, y, w, h) {\n\telement.style.left = x + 'px';\n\telement.style.top = y + 'px';\n\telement.style.width = w + 'px';\n\telement.style.height = h + 'px';\n}\n\nfunction hintHide() {\n  setBounds(ghostpane, b.left, b.top, b.width, b.height);\n  ghostpane.style.opacity = 0;\n\n  // var b = ghostpane.getBoundingClientRect();\n  // ghostpane.style.top = b.top + b.height / 2;\n  // ghostpane.style.left = b.left + b.width / 2;\n  // ghostpane.style.width = 0;\n  // ghostpane.style.height = 0;\n}\n\n\n// Mouse events\npane.addEventListener('mousedown', onMouseDown);\ndocument.addEventListener('mousemove', onMove);\ndocument.addEventListener('mouseup', onUp);\n\n// Touch events\t\npane.addEventListener('touchstart', onTouchDown);\ndocument.addEventListener('touchmove', onTouchMove);\ndocument.addEventListener('touchend', onTouchEnd);\n\n\nfunction onTouchDown(e) {\n  onDown(e.touches[0]);\n  e.preventDefault();\n}\n\nfunction onTouchMove(e) {\n  onMove(e.touches[0]);\t\t\n}\n\nfunction onTouchEnd(e) {\n  if (e.touches.length ==0) onUp(e.changedTouches[0]);\n}\n\nfunction onMouseDown(e) {\n  onDown(e);\n  e.preventDefault();\n}\n\nfunction onDown(e) {\n  calc(e);\n\n  var isResizing = onRightEdge || onBottomEdge || onTopEdge || onLeftEdge;\n\n  clicked = {\n    x: x,\n    y: y,\n    cx: e.clientX,\n    cy: e.clientY,\n    w: b.width,\n    h: b.height,\n    isResizing: isResizing,\n    isMoving: !isResizing && canMove(),\n    onTopEdge: onTopEdge,\n    onLeftEdge: onLeftEdge,\n    onRightEdge: onRightEdge,\n    onBottomEdge: onBottomEdge\n  };\n}\n\nfunction canMove() {\n  return x > 0 && x < b.width && y > 0 && y < b.height\n  && y < 30;\n}\n\nfunction calc(e) {\n  b = pane.getBoundingClientRect();\n  x = e.clientX - b.left;\n  y = e.clientY - b.top;\n\n  onTopEdge = y < MARGINS;\n  onLeftEdge = x < MARGINS;\n  onRightEdge = x >= b.width - MARGINS;\n  onBottomEdge = y >= b.height - MARGINS;\n\n  rightScreenEdge = window.innerWidth - MARGINS;\n  bottomScreenEdge = window.innerHeight - MARGINS;\n}\n\nvar e;\n\nfunction onMove(ee) {\n  calc(ee);\n\n  e = ee;\n\n  redraw = true;\n\n}\n\nfunction animate() {\n\n  requestAnimationFrame(animate);\n\n  if (!redraw) return;\n\n  redraw = false;\n\n  if (clicked && clicked.isResizing) {\n\n    if (clicked.onRightEdge) pane.style.width = Math.max(x, minWidth) + 'px';\n    if (clicked.onBottomEdge) pane.style.height = Math.max(y, minHeight) + 'px';\n\n    if (clicked.onLeftEdge) {\n      var currentWidth = Math.max(clicked.cx - e.clientX  + clicked.w, minWidth);\n      if (currentWidth > minWidth) {\n        pane.style.width = currentWidth + 'px';\n        pane.style.left = e.clientX + 'px';\t\n      }\n    }\n\n    if (clicked.onTopEdge) {\n      var currentHeight = Math.max(clicked.cy - e.clientY  + clicked.h, minHeight);\n      if (currentHeight > minHeight) {\n        pane.style.height = currentHeight + 'px';\n        pane.style.top = e.clientY + 'px';\t\n      }\n    }\n\n    hintHide();\n\n    return;\n  }\n\n  if (clicked && clicked.isMoving) {\n\n    if (b.top < FULLSCREEN_MARGINS || b.left < FULLSCREEN_MARGINS || b.right > window.innerWidth - FULLSCREEN_MARGINS || b.bottom > window.innerHeight - FULLSCREEN_MARGINS) {\n      // hintFull();\n      setBounds(ghostpane, 0, 0, window.innerWidth, window.innerHeight);\n      ghostpane.style.opacity = 0.2;\n    } else if (b.top < MARGINS) {\n      // hintTop();\n      setBounds(ghostpane, 0, 0, window.innerWidth, window.innerHeight / 2);\n      ghostpane.style.opacity = 0.2;\n    } else if (b.left < MARGINS) {\n      // hintLeft();\n      setBounds(ghostpane, 0, 0, window.innerWidth / 2, window.innerHeight);\n      ghostpane.style.opacity = 0.2;\n    } else if (b.right > rightScreenEdge) {\n      // hintRight();\n      setBounds(ghostpane, window.innerWidth / 2, 0, window.innerWidth / 2, window.innerHeight);\n      ghostpane.style.opacity = 0.2;\n    } else if (b.bottom > bottomScreenEdge) {\n      // hintBottom();\n      setBounds(ghostpane, 0, window.innerHeight / 2, window.innerWidth, window.innerWidth / 2);\n      ghostpane.style.opacity = 0.2;\n    } else {\n      hintHide();\n    }\n\n    if (preSnapped) {\n      setBounds(pane,\n      \te.clientX - preSnapped.width / 2,\n      \te.clientY - Math.min(clicked.y, preSnapped.height),\n      \tpreSnapped.width,\n      \tpreSnapped.height\n      );\n      return;\n    }\n\n    // moving\n    pane.style.top = (e.clientY - clicked.y) + 'px';\n    pane.style.left = (e.clientX - clicked.x) + 'px';\n\n    return;\n  }\n\n  // This code executes when mouse moves without clicking\n\n  // style cursor\n  if (onRightEdge && onBottomEdge || onLeftEdge && onTopEdge) {\n    pane.style.cursor = 'nwse-resize';\n  } else if (onRightEdge && onTopEdge || onBottomEdge && onLeftEdge) {\n    pane.style.cursor = 'nesw-resize';\n  } else if (onRightEdge || onLeftEdge) {\n    pane.style.cursor = 'ew-resize';\n  } else if (onBottomEdge || onTopEdge) {\n    pane.style.cursor = 'ns-resize';\n  } else if (canMove()) {\n    pane.style.cursor = 'move';\n  } else {\n    pane.style.cursor = 'default';\n  }\n}\n\nanimate();\n\nfunction onUp(e) {\n  calc(e);\n\n  if (clicked && clicked.isMoving) {\n    // Snap\n    var snapped = {\n      width: b.width,\n      height: b.height\n    };\n\n    if (b.top < FULLSCREEN_MARGINS || b.left < FULLSCREEN_MARGINS || b.right > window.innerWidth - FULLSCREEN_MARGINS || b.bottom > window.innerHeight - FULLSCREEN_MARGINS) {\n      // hintFull();\n      setBounds(pane, 0, 0, window.innerWidth, window.innerHeight);\n      preSnapped = snapped;\n    } else if (b.top < MARGINS) {\n      // hintTop();\n      setBounds(pane, 0, 0, window.innerWidth, window.innerHeight / 2);\n      preSnapped = snapped;\n    } else if (b.left < MARGINS) {\n      // hintLeft();\n      setBounds(pane, 0, 0, window.innerWidth / 2, window.innerHeight);\n      preSnapped = snapped;\n    } else if (b.right > rightScreenEdge) {\n      // hintRight();\n      setBounds(pane, window.innerWidth / 2, 0, window.innerWidth / 2, window.innerHeight);\n      preSnapped = snapped;\n    } else if (b.bottom > bottomScreenEdge) {\n      // hintBottom();\n      setBounds(pane, 0, window.innerHeight / 2, window.innerWidth, window.innerWidth / 2);\n      preSnapped = snapped;\n    } else {\n      preSnapped = null;\n    }\n\n    hintHide();\n\n  }\n\n  clicked = null;\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}